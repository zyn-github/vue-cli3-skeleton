{"version":3,"sources":["webpack:///./src/views/Ranking.vue?9901","webpack:///src/views/Ranking.vue","webpack:///./src/views/Ranking.vue?6d3a","webpack:///./src/views/Ranking.vue?f2be","webpack:///./src/views/Ranking.vue?903b","webpack:///./src/views/Ranking.vue?584b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","isLeft","isRight","_e","isLoading","type","on","click","changeTab","model","value","callback","$$v","active","expression","_l","item","n","key","name","id","tabClick","rankingData","index","n2","slot","_v","_s","shortTitle","directives","rawName","data","currentBook","isBottom","staticRenderFns","Rankingvue_type_script_lang_js_","components","Header","Nav","List","Loading","rankingTitle","currentTab","rankingBook","created","pageInit","watch","_id","getRanking","methods","index2","toast","loading","mask","message","_getRanking","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","arr","_data","_this","_args","arguments","wrap","_context","prev","next","length","undefined","axios","get","sent","flag","clear","ranking","msg","filter","el","book","abrupt","push","books","setTimeout","stop","apply","views_Rankingvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Ranking_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Ranking_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Ranking_vue_vue_type_style_index_1_id_253d1520_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Ranking_vue_vue_type_style_index_1_id_253d1520_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-6dc5401a.906c3b2b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ranking\"},[_c('Header',{attrs:{\"title\":\"排行榜\",\"isLeft\":true,\"isRight\":true}}),(_vm.isLoading)?_c('Loading'):_vm._e(),(!_vm.isLoading)?_c('van-tabs',{attrs:{\"type\":\"card\"},on:{\"click\":_vm.changeTab},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.rankingTitle),function(item,n){return _c('van-tab',{key:n,attrs:{\"title\":item.name}},[_c('van-tabs',{attrs:{\"id\":\"ranking-tab\"},on:{\"click\":_vm.tabClick}},_vm._l((_vm.rankingData[item.id]),function(index,n2){return _c('van-tab',{key:n2},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"\\n              \"+_vm._s(index.shortTitle)+\"\\n            \")]),_c('List',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentBook),expression:\"currentBook\"}],attrs:{\"data\":_vm.currentBook,\"isBottom\":true}})],1)}),1)],1)}),1):_vm._e(),_c('Nav')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ranking\">\n    <!-- 头部 -->\n    <Header title=\"排行榜\" :isLeft=\"true\" :isRight=\"true\"/>\n    <!-- 头部 end -->\n    <!-- 加载动画 -->\n    <Loading v-if=\"isLoading\"/>\n    <!-- 加载动画 end -->\n    <!-- 选项卡 -->\n    <van-tabs v-model=\"active\" type=\"card\" @click=\"changeTab\"  v-if=\"!isLoading\">\n      <van-tab v-for=\"(item, n) in rankingTitle\" :title=\"item.name\" :key=\"n\">\n         <van-tabs @click=\"tabClick\" id=\"ranking-tab\">\n            <van-tab v-for=\"(index, n2) in rankingData[item.id]\" :key=\"n2\">\n              <div slot=\"title\" class=\"title\">\n                {{ index.shortTitle }}\n              </div>\n              <List :data=\"currentBook\" v-show=\"currentBook\" :isBottom=\"true\"/>\n            </van-tab>\n         </van-tabs>\n      </van-tab>\n    </van-tabs>\n    <!-- 选项卡 end -->\n    <!-- 导航 -->\n    <Nav />\n    <!-- 导航 end -->\n  </div>\n</template>\n\n<script>\nimport Header from \"@/components/base/Header.vue\";\nimport Nav from \"@/components/base/Nav.vue\";\nimport Loading from \"@/components/base/Loading.vue\";\nimport List from \"@/components/List.vue\";\nimport { Toast } from \"vant\";\n\nexport default {\n  name: \"ranking\",\n  components: {\n    Header,\n    Nav,\n    List,\n    Loading\n  },\n  data() {\n    return {\n      active: 0,\n      isLoading: true,\n      rankingTitle: [\n        {\n          name: \"男生\",\n          id: \"male\",\n          index: 0\n        },\n        {\n          name: \"电子书\",\n          id: \"epub\",\n          index: 0\n        },\n        {\n          name: \"女生\",\n          id: \"female\",\n          index: 0\n        }\n      ],\n      rankingData: {},\n      currentTab: \"male\",\n      rankingBook: [],\n      currentBook: []\n    };\n  },\n  created() {\n    this.pageInit();\n  },\n  watch: {\n    rankingData: function() {\n      let id = this.rankingData[this.currentTab][0]._id;\n      this.getRanking(id);\n    }\n  },\n  methods: {\n    pageInit() {\n      this.getRanking();\n    },\n    tabClick(index2) {\n      Toast.loading({\n        mask: true,\n        message: \"加载中...\"\n      });\n      this.rankingTitle[this.active].index = index2;\n      let id = this.rankingData[this.currentTab][index2]._id;\n      this.getRanking(id);\n    },\n    changeTab(index2) {\n      Toast.loading({\n        mask: true,\n        message: \"加载中...\"\n      });\n      let n = this.rankingTitle[index2].index;\n      this.currentTab = this.rankingTitle[index2].id;\n      let id = this.rankingData[this.currentTab][n]._id;\n      this.getRanking(id);\n    },\n    async getRanking(id = \"\") {\n      if (id === \"\") {\n        let data = await this.axios.get(\"/ranking\");\n        if (data.flag === 1) {\n          Toast.clear();\n          this.rankingData = data.ranking;\n        } else {\n          Toast.clear();\n          Toast(data.msg);\n        }\n      } else {\n        // 缓存加载过的排行榜\n        if (this.rankingBook.length > 0) {\n          let arr = this.rankingBook.filter(el => {\n            return el.id == id;\n          });\n          if (arr.length > 0) {\n            this.currentBook = arr[0].book;\n            Toast.clear();\n            return;\n          }\n        }\n        let data = await this.axios.get(\"/ranking/\" + id);\n        if (data.flag === 1) {\n          Toast.clear();\n          this.rankingBook.push({\n            id,\n            book: data.ranking.books\n          });\n          this.currentBook = data.ranking.books;\n        } else {\n          Toast.clear();\n          Toast(data.msg);\n        }\n      }\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 300);\n    }\n  }\n};\n</script>\n<style lang=\"scss\">\n.van-tabs--line .van-tabs__wrap {\n  height: 32px;\n}\n</style>\n\n\n<style scoped lang=\"scss\">\n.ranking {\n  min-height: 100%;\n  .van-loading {\n    margin-top: 56px;\n  }\n  .van-tabs {\n    margin-top: 56px;\n    .van-tabs {\n      margin-top: 0px;\n    }\n  }\n  .title {\n    line-height: 30px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Ranking.vue?vue&type=template&id=253d1520&scoped=true&\"\nimport script from \"./Ranking.vue?vue&type=script&lang=js&\"\nexport * from \"./Ranking.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Ranking.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"253d1520\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Ranking.vue?vue&type=style&index=1&id=253d1520&scoped=true&lang=scss&\""],"sourceRoot":""}